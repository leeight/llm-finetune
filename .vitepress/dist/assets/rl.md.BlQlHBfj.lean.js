import{_ as T,c as i,o as l,ag as t,j as s,a as n}from"./chunks/framework.C1nslR49.js";const e="/llm-finetune/assets/rlhf_process.ChY_NENc.png",Q="/llm-finetune/assets/ppo_workflow.D9XY4IG7.png",h="/llm-finetune/assets/GRPO.CYRU1DpR.png",p="/llm-finetune/assets/dpo_train.dASvzylM.png",r="/llm-finetune/assets/oaif.DBsXAh--.png",s1=JSON.parse('{"title":"对齐训练","description":"","frontmatter":{},"headers":[],"relativePath":"rl.md","filePath":"rl.md"}'),d={name:"rl.md"},k={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},o={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.667ex"},xmlns:"http://www.w3.org/2000/svg",width:"36.154ex",height:"2.364ex",role:"img",focusable:"false",viewBox:"0 -750 15980.1 1045","aria-hidden":"true"},m={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.292ex",height:"1ex",role:"img",focusable:"false",viewBox:"0 -431 571 442","aria-hidden":"true"},y={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.667ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.162ex",height:"1.667ex",role:"img",focusable:"false",viewBox:"0 -442 955.4 737","aria-hidden":"true"},c={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.294ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 572 453","aria-hidden":"true"},F={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},H={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.989ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 879.2 647","aria-hidden":"true"},w={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},x={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.018ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 891.9 647","aria-hidden":"true"},f={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},C={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.198ex"},xmlns:"http://www.w3.org/2000/svg",width:"86.475ex",height:"5.501ex",role:"img",focusable:"false",viewBox:"0 -1460 38222.2 2431.6","aria-hidden":"true"},L={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},D={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.759ex",height:"1.437ex",role:"img",focusable:"false",viewBox:"0 -441 5639.6 635","aria-hidden":"true"},_={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},M={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.172ex"},xmlns:"http://www.w3.org/2000/svg",width:"33.019ex",height:"5.475ex",role:"img",focusable:"false",viewBox:"0 -1460 14594.5 2420","aria-hidden":"true"},b={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},A={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.76ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 778 599.8","aria-hidden":"true"},Z={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},V={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.274ex"},xmlns:"http://www.w3.org/2000/svg",width:"76.492ex",height:"5.577ex",role:"img",focusable:"false",viewBox:"0 -1460 33809.4 2465","aria-hidden":"true"},v={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},B={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.355ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.228ex",height:"1.33ex",role:"img",focusable:"false",viewBox:"0 -431 984.6 588.1","aria-hidden":"true"},P={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.667ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.824ex",height:"1.642ex",role:"img",focusable:"false",viewBox:"0 -431 1690.3 726","aria-hidden":"true"},j={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},R={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.294ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 572 453","aria-hidden":"true"},q={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},S={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.442ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 1079.3 647","aria-hidden":"true"},I={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},N={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.773ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 783.7 647","aria-hidden":"true"},G={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.281ex",height:"2.034ex",role:"img",focusable:"false",viewBox:"0 -705 566 899","aria-hidden":"true"};function X(J,a,K,U,$,Y){return l(),i("div",null,[a[51]||(a[51]=t("",31)),s("mjx-container",k,[(l(),i("svg",o,a[0]||(a[0]=[t("",1)]))),a[1]||(a[1]=s("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("mi",null,"L"),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"r"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"ϕ")])]),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mo",null,"−"),s("mi",null,"log"),s("mo",{"data-mjx-texclass":"NONE"},"⁡"),s("mi",null,"σ"),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"r"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"ϕ")])]),s("mo",{stretchy:"false"},"("),s("mi",null,"x"),s("mo",null,","),s("msub",null,[s("mi",null,"y"),s("mi",null,"c")]),s("mo",{stretchy:"false"},")"),s("mo",null,"−"),s("msub",null,[s("mi",null,"r"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"ϕ")])]),s("mo",{stretchy:"false"},"("),s("mi",null,"x"),s("mo",null,","),s("msub",null,[s("mi",null,"y"),s("mi",null,"r")]),s("mo",{stretchy:"false"},")"),s("mo",{stretchy:"false"},")")])],-1))]),s("p",null,[a[12]||(a[12]=n("其中 ")),s("mjx-container",m,[(l(),i("svg",g,a[2]||(a[2]=[s("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[s("g",{"data-mml-node":"math"},[s("g",{"data-mml-node":"mi"},[s("path",{"data-c":"1D70E",d:"M184 -11Q116 -11 74 34T31 147Q31 247 104 333T274 430Q275 431 414 431H552Q553 430 555 429T559 427T562 425T565 422T567 420T569 416T570 412T571 407T572 401Q572 357 507 357Q500 357 490 357T476 358H416L421 348Q439 310 439 263Q439 153 359 71T184 -11ZM361 278Q361 358 276 358Q152 358 115 184Q114 180 114 178Q106 141 106 117Q106 67 131 47T188 26Q242 26 287 73Q316 103 334 153T356 233T361 278Z",style:{"stroke-width":"3"}})])])],-1)]))),a[3]||(a[3]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("mi",null,"σ")])],-1))]),a[13]||(a[13]=n(" 是 sigmoid 函数，")),s("mjx-container",y,[(l(),i("svg",E,a[4]||(a[4]=[t("",1)]))),a[5]||(a[5]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("msub",null,[s("mi",null,"r"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"ϕ")])])])],-1))]),a[14]||(a[14]=n(" 是模型，")),s("mjx-container",c,[(l(),i("svg",u,a[6]||(a[6]=[s("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[s("g",{"data-mml-node":"math"},[s("g",{"data-mml-node":"mi"},[s("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})])])],-1)]))),a[7]||(a[7]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("mi",null,"x")])],-1))]),a[15]||(a[15]=n(" 是输入，")),s("mjx-container",F,[(l(),i("svg",H,a[8]||(a[8]=[t("",1)]))),a[9]||(a[9]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("msub",null,[s("mi",null,"y"),s("mi",null,"c")])])],-1))]),a[16]||(a[16]=n("（c 是 chosen）是正确的回答，")),s("mjx-container",w,[(l(),i("svg",x,a[10]||(a[10]=[t("",1)]))),a[11]||(a[11]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("msub",null,[s("mi",null,"y"),s("mi",null,"r")])])],-1))]),a[17]||(a[17]=n("（r 是 rejected）是错误的回答。"))]),a[52]||(a[52]=t("",20)),s("mjx-container",f,[(l(),i("svg",C,a[18]||(a[18]=[t("",1)]))),a[19]||(a[19]=s("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("msub",null,[s("mtext",null,"L"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"p"),s("mi",null,"o"),s("mi",null,"l"),s("mi",null,"i"),s("mi",null,"c"),s("mi",null,"y")])]),s("mo",null,"="),s("mfrac",null,[s("mn",null,"1"),s("mi",null,"T")]),s("mo",{"data-mjx-texclass":"OP"},"∑"),s("mo",{"data-mjx-texclass":"OP",movablelimits:"true"},"max"),s("mrow",{"data-mjx-texclass":"INNER"},[s("mo",{"data-mjx-texclass":"OPEN"},"("),s("mo",null,"−"),s("mfrac",null,[s("mrow",null,[s("msub",null,[s("mi",null,"π"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"θ")])]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"a"),s("mi",null,"t")]),s("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),s("msub",null,[s("mi",null,"s"),s("mi",null,"t")]),s("mo",{stretchy:"false"},")")]),s("mrow",null,[s("msub",null,[s("mi",null,"π"),s("mrow",{"data-mjx-texclass":"ORD"},[s("msub",null,[s("mi",null,"θ"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mtext",null,"old")])])])]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"a"),s("mi",null,"t")]),s("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),s("msub",null,[s("mi",null,"s"),s("mi",null,"t")]),s("mo",{stretchy:"false"},")")])]),s("mrow",{"data-mjx-texclass":"ORD"},[s("mover",null,[s("mi",null,"A"),s("mo",{stretchy:"false"},"^")])]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"s"),s("mi",null,"t")]),s("mo",null,","),s("msub",null,[s("mi",null,"a"),s("mi",null,"t")]),s("mo",{stretchy:"false"},")"),s("mo",null,","),s("mstyle",{scriptlevel:"0"},[s("mspace",{width:"0.278em"})]),s("mstyle",{scriptlevel:"0"},[s("mspace",{width:"0.278em"})]),s("mo",null,"−"),s("mtext",null,"clip"),s("mrow",{"data-mjx-texclass":"INNER"},[s("mo",{"data-mjx-texclass":"OPEN"},"("),s("mfrac",null,[s("mrow",null,[s("msub",null,[s("mi",null,"π"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"θ")])]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"a"),s("mi",null,"t")]),s("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),s("msub",null,[s("mi",null,"s"),s("mi",null,"t")]),s("mo",{stretchy:"false"},")")]),s("mrow",null,[s("msub",null,[s("mi",null,"π"),s("mrow",{"data-mjx-texclass":"ORD"},[s("msub",null,[s("mi",null,"θ"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mtext",null,"old")])])])]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"a"),s("mi",null,"t")]),s("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),s("msub",null,[s("mi",null,"s"),s("mi",null,"t")]),s("mo",{stretchy:"false"},")")])]),s("mo",null,","),s("mn",null,"1"),s("mo",null,"−"),s("mi",null,"ϵ"),s("mo",null,","),s("mn",null,"1"),s("mo",null,"+"),s("mi",null,"ϵ"),s("mo",{"data-mjx-texclass":"CLOSE"},")")]),s("mrow",{"data-mjx-texclass":"ORD"},[s("mover",null,[s("mi",null,"A"),s("mo",{stretchy:"false"},"^")])]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"s"),s("mi",null,"t")]),s("mo",null,","),s("msub",null,[s("mi",null,"a"),s("mi",null,"t")]),s("mo",{stretchy:"false"},")"),s("mo",{"data-mjx-texclass":"CLOSE"},")")])])],-1))]),a[53]||(a[53]=t("",12)),s("p",null,[a[22]||(a[22]=n("GRPO 和 PPO 最大的不同是去掉了价值模型。没有价值模型要如何计算优势？GRPO 的做法是每一个问题生成多个回答 ")),s("mjx-container",L,[(l(),i("svg",D,a[20]||(a[20]=[t("",1)]))),a[21]||(a[21]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("msub",null,[s("mi",null,"o"),s("mn",null,"1")]),s("mo",null,","),s("msub",null,[s("mi",null,"o"),s("mn",null,"2")]),s("mo",null,","),s("mo",null,"⋯"),s("mo",null,","),s("msub",null,[s("mi",null,"o"),s("mi",null,"G")])])],-1))]),a[23]||(a[23]=n("，计算它们的奖励，然后计算这些奖励的平均值和标准差，最后通过如下公式来计算优势："))]),s("mjx-container",_,[(l(),i("svg",M,a[24]||(a[24]=[t("",1)]))),a[25]||(a[25]=s("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("msub",null,[s("mi",null,"A"),s("mi",null,"i")]),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("msub",null,[s("mi",null,"r"),s("mi",null,"i")]),s("mo",null,"−"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",{mathvariant:"normal"},"m")]),s("mi",null,"e"),s("mi",null,"a"),s("mi",null,"n"),s("mo",{stretchy:"false"},"("),s("mo",{fence:"false",stretchy:"false"},"{"),s("msub",null,[s("mi",null,"r"),s("mn",null,"1")]),s("mo",null,","),s("msub",null,[s("mi",null,"r"),s("mn",null,"2")]),s("mo",null,","),s("mo",null,"⋯"),s("mo",null,","),s("msub",null,[s("mi",null,"r"),s("mi",null,"G")]),s("mo",{fence:"false",stretchy:"false"},"}"),s("mo",{stretchy:"false"},")")])]),s("mrow",{"data-mjx-texclass":"ORD"},[s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",{mathvariant:"normal"},"s")]),s("mi",null,"t"),s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mo",{fence:"false",stretchy:"false"},"{"),s("msub",null,[s("mi",null,"r"),s("mn",null,"1")]),s("mo",null,","),s("msub",null,[s("mi",null,"r"),s("mn",null,"2")]),s("mo",null,","),s("mo",null,"⋯"),s("mo",null,","),s("msub",null,[s("mi",null,"r"),s("mi",null,"G")]),s("mo",{fence:"false",stretchy:"false"},"}"),s("mo",{stretchy:"false"},")")])])])],-1))]),a[54]||(a[54]=t("",2)),s("p",null,[a[28]||(a[28]=n("其中 ")),s("mjx-container",b,[(l(),i("svg",A,a[26]||(a[26]=[t("",1)]))),a[27]||(a[27]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("msub",null,[s("mi",null,"r"),s("mi",null,"i")])])],-1))]),a[29]||(a[29]=n(" 是当前奖励，有了这个奖励就能计算损失了。具体损失计算公式比较复杂，这里我们不展开详细介绍，因为了解前面的优势计算方法就知道所有训练关键超参数了。GRPO 的核心思想是通过「群体智慧」来优化模型，认为生成多个答案的整体效果比生成单个答案好。"))]),a[55]||(a[55]=t("",10)),s("mjx-container",Z,[(l(),i("svg",V,a[30]||(a[30]=[t("",1)]))),a[31]||(a[31]=s("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("msub",null,[s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"L")]),s("mtext",null,"DPO")]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"π"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"θ")])]),s("mo",null,";"),s("msub",null,[s("mi",null,"π"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"r"),s("mi",null,"e"),s("mi",null,"f")])]),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mo",null,"−"),s("msub",null,[s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",{mathvariant:"double-struck"},"E")]),s("mrow",{"data-mjx-texclass":"ORD"},[s("mo",{stretchy:"false"},"("),s("mi",null,"x"),s("mo",null,","),s("msub",null,[s("mi",null,"y"),s("mi",null,"w")]),s("mo",null,","),s("msub",null,[s("mi",null,"y"),s("mi",null,"l")]),s("mo",{stretchy:"false"},")"),s("mo",null,"∼"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",{"data-mjx-variant":"-tex-calligraphic",mathvariant:"script"},"D")])])]),s("mrow",{"data-mjx-texclass":"INNER"},[s("mo",{"data-mjx-texclass":"OPEN"},"["),s("mi",null,"log"),s("mo",{"data-mjx-texclass":"NONE"},"⁡"),s("mi",null,"σ"),s("mrow",{"data-mjx-texclass":"INNER"},[s("mo",{"data-mjx-texclass":"OPEN"},"("),s("mi",null,"β"),s("mi",null,"log"),s("mo",{"data-mjx-texclass":"NONE"},"⁡"),s("mfrac",null,[s("mrow",null,[s("msub",null,[s("mi",null,"π"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"θ")])]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"y"),s("mi",null,"w")]),s("mo",null,"∣"),s("mi",null,"x"),s("mo",{stretchy:"false"},")")]),s("mrow",null,[s("msub",null,[s("mi",null,"π"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"r"),s("mi",null,"e"),s("mi",null,"f")])]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"y"),s("mi",null,"w")]),s("mo",null,"∣"),s("mi",null,"x"),s("mo",{stretchy:"false"},")")])]),s("mo",null,"−"),s("mi",null,"β"),s("mi",null,"log"),s("mo",{"data-mjx-texclass":"NONE"},"⁡"),s("mfrac",null,[s("mrow",null,[s("msub",null,[s("mi",null,"π"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"θ")])]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"y"),s("mi",null,"l")]),s("mo",null,"∣"),s("mi",null,"x"),s("mo",{stretchy:"false"},")")]),s("mrow",null,[s("msub",null,[s("mi",null,"π"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"r"),s("mi",null,"e"),s("mi",null,"f")])]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"y"),s("mi",null,"l")]),s("mo",null,"∣"),s("mi",null,"x"),s("mo",{stretchy:"false"},")")])]),s("mo",{"data-mjx-texclass":"CLOSE"},")")]),s("mo",{"data-mjx-texclass":"CLOSE"},"]")])])],-1))]),s("p",null,[a[44]||(a[44]=n("其中 ")),s("mjx-container",v,[(l(),i("svg",B,a[32]||(a[32]=[t("",1)]))),a[33]||(a[33]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("msub",null,[s("mi",null,"π"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"θ")])])])],-1))]),a[45]||(a[45]=n(" 是训练模型，")),s("mjx-container",P,[(l(),i("svg",O,a[34]||(a[34]=[t("",1)]))),a[35]||(a[35]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("msub",null,[s("mi",null,"π"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"r"),s("mi",null,"e"),s("mi",null,"f")])])])],-1))]),a[46]||(a[46]=n(" 是参考模型，")),s("mjx-container",j,[(l(),i("svg",R,a[36]||(a[36]=[s("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[s("g",{"data-mml-node":"math"},[s("g",{"data-mml-node":"mi"},[s("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})])])],-1)]))),a[37]||(a[37]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("mi",null,"x")])],-1))]),a[47]||(a[47]=n(" 是输入，")),s("mjx-container",q,[(l(),i("svg",S,a[38]||(a[38]=[t("",1)]))),a[39]||(a[39]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("msub",null,[s("mi",null,"y"),s("mi",null,"w")])])],-1))]),a[48]||(a[48]=n(" 是正确答案，")),s("mjx-container",I,[(l(),i("svg",N,a[40]||(a[40]=[t("",1)]))),a[41]||(a[41]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("msub",null,[s("mi",null,"y"),s("mi",null,"l")])])],-1))]),a[49]||(a[49]=n(" 是错误答案，")),s("mjx-container",G,[(l(),i("svg",z,a[42]||(a[42]=[s("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[s("g",{"data-mml-node":"math"},[s("g",{"data-mml-node":"mi"},[s("path",{"data-c":"1D6FD",d:"M29 -194Q23 -188 23 -186Q23 -183 102 134T186 465Q208 533 243 584T309 658Q365 705 429 705H431Q493 705 533 667T573 570Q573 465 469 396L482 383Q533 332 533 252Q533 139 448 65T257 -10Q227 -10 203 -2T165 17T143 40T131 59T126 65L62 -188Q60 -194 42 -194H29ZM353 431Q392 431 427 419L432 422Q436 426 439 429T449 439T461 453T472 471T484 495T493 524T501 560Q503 569 503 593Q503 611 502 616Q487 667 426 667Q384 667 347 643T286 582T247 514T224 455Q219 439 186 308T152 168Q151 163 151 147Q151 99 173 68Q204 26 260 26Q302 26 349 51T425 137Q441 171 449 214T457 279Q457 337 422 372Q380 358 347 358H337Q258 358 258 389Q258 396 261 403Q275 431 353 431Z",style:{"stroke-width":"3"}})])])],-1)]))),a[43]||(a[43]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("mi",null,"β")])],-1))]),a[50]||(a[50]=n(" 是控制 KL 惩罚强度的温度参数。我们也可以通过代码来理解："))]),a[56]||(a[56]=t("",24))])}const a1=T(d,[["render",X]]);export{s1 as __pageData,a1 as default};
